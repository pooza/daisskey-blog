---
title: 自動のハッシュタグ
date: 2023-07-08
categories: 機能
---

ダイスキーでは、多くのハッシュタグが自動で挿入されます。
このページに書かれているほとんどはMisskey本来の機能ではなく、 __独自機能です__ 。

## とにかくタグの挿入を止めたい！

- このページの説明は長いです。 __手っ取り早くタグの挿入だけ止めたい方は、まず以下の手順だけおぼえてください。__
- このページには、サーバーの設計思想に関わる大事な事柄が多く書かれています。落ち着いてからで構いませんのでこのページに戻ってきて、全ての説明に目を通して頂けると幸いです。（もちろん共感して頂ければなおよし）

### タグが挿入されるのはパブリックの投稿だけ！

- 公開範囲を`ホーム`以下に落とせば、タグは挿入されなくなります。

{% asset_img form1.webp %}
{% asset_img form2.webp %}

### デフォルトの公開範囲を変更

- デフォルトの公開範囲を`ホーム`にして頂いても良いかもしれません。
- さすがに`フォロワー`や`ダイレクト`をデフォルトにするのはやめて欲しいです。`ホーム`までにしてください。

{% asset_img config.webp %}

### 「\#ダイの大冒険」タグを外せるだけでも十分な場合

- `パブリック`の投稿であっても、`#即売会`タグが含まれていれば、`#ダイの大冒険`という（公式が頻繁に使用する）タグが削除されます。

## どんなタグが自動で挿入されるのか

- どのタグも、公開範囲が`ホーム`以下の投稿には挿入されません。

### デフォルトハッシュタグ

- `パブリック`の投稿に、[\#delmulin](/articles/delmulin)を挿入します。
- デフォルトハッシュタグの目的・意義などについては、[別途ページ](/articles/delmulin)を設けて説明しています。

### メディアタイプ

- 画像を含んだ投稿には`#image`を挿入します。
- 動画を含んだ投稿には`#video`を挿入します。
- 楽曲を含んだ投稿には`#audio`を挿入します。

### キーワードの関連タグ

- 投稿本文中にあるダイ大関連の劇中キーワードに反応し、関連したタグを（場合によっては複数のタグを）挿入します。
- 文節区切り等は考慮していません。この為誤ったタグが挿入されることが割と多くあります。
  - 気になる場合は`削除してタグづけ`を行ってください。（後述）
- __劇中キーワードをひとつでも含む投稿に対して、`#ダイの大冒険`タグが挿入されます。__

### キャラクター関連タグ

- 投稿本文中にキャラクターや担当声優さんの名前が含まれる時、それぞれに該当するタグが挿入されます。
  - キャラクター名 → 新アニメの声優さんの名前
  - 新アニメの声優さんの名前 → キャラクター名
  - 旧アニメの声優さんの名前 → キャラクター名
  - 新アニメの声優さんの姓 → 新アニメの声優さんの名前
  - 旧アニメの声優さんの姓 → 旧アニメの声優さんの名前

### 実況用タグ

- [実況](/articles/実況)中は、その番組やエピソードに関連するハッシュタグを追加します。

## 自動タグの目的

### デルムリン丼

- 機能の目的を説明する為に、一旦、ダイスキーより早く生まれた姉妹サーバー[デルムリン丼](https://mstdn.delmulin.com/)にまで遡ります。
- [デルムリン丼](https://mstdn.delmulin.com/)はMastodonサーバーですが、Mastodonでは通常、 __サーバー側が相当に贅沢な構成でなければ__ サーバー内の全文検索が使用できません。
  - これが「Mastodonは検索が弱い」とよく言われる（揶揄される）、まずひとつ目の理由になっています。
  - 仮にそのサーバーの検索機能が有効であっても、検索対象は原則的にサーバーの中の投稿だけです。
  - [デルムリン丼](https://mstdn.delmulin.com/)で全文検索が使えるのは改造しているからで、贅沢な構成を採用している為ではありません。（その分機能は制限されていますし）
  - デルムリン丼以外で全文検索が利用可能な外部のサーバーを利用している方は、改めて、管理人様に感謝しながら利用してください。

### Mastodonの検索の弱さをふまえて

- [デルムリン丼](https://mstdn.delmulin.com/)の自動タグ機能は、Mastodonの検索機能を補うことに留まらず。
- 大げさに言えば、集合知の蓄積に役立てることも目指しています。企画当初から構想の中核に存在した __サーバーのアイデンティティの様な機能__ です。
- ダイスキーに同じ機能が実装されているのも、姉妹サーバーとして、同じ目的を踏襲しているからです。

### パブリック投稿だけ

- 元々、ハッシュタグが本来持っている機能は`パブリック`でしか有効になりません。
- `ホーム`以下の投稿に対してタグ付けする意味は薄い（全く無意味というわけでもないのですが）為、該当しない投稿には手を触れない仕様にしました。
- 積極的に拡散したい投稿は（外部サーバーのユーザーの目にも入りやすい様に）タグづけされ、逆になるべく拡散したくない投稿はタグ付けしない。これが設計上の意図です。

## 利用の実際

冒頭の説明とも一部重複しますが。

### 「\#即売会」タグ

- `#即売会`タグが含まれていれば、`#ダイの大冒険`タグが削除されます。
- サークル紹介などで`#即売会`タグを適切に含めて頂ければ、今後`#ダイの大冒険`タグを外すだけでなく、更に適切なタグ付けを行わせることが出来るかもしれません。

### 「\#fanart」タグ

- ご自分のイラストの投稿には、`#fanart`タグを加えることを推奨します。
- 煩わしい作業こそ、それを自動化するのはサーバーの役割でもあるのですが、こればかりは自動化できません。

### 二次創作系タグ

- `#ダイの大冒険`のような公式が頻繁に使うタグは外す一方、公式が使わない用語（カップリング名、イベント名等）のタグは積極的に加え、同士の目に触れるチャンスを増やしてください。
- この「必要なタグだけ残す」さじ加減の調整では、「削除してタグづけ」機能（以下画面）が有効です。

{% asset_img delete_and_tagging.webp %}

- 「削除してタグづけ」をその端末で（正確にはそのブラウザーで）最初に使用する時、[トークンの登録](https://misskey.delmulin.com/mulukhiya/app/token)という作業が必要です。（リンク先で指示に従ってください）
  - スマホアプリでMisskeyを利用したことがある方にはおなじみの作業かもしれません。

### 「勇者アバン 獄炎の魔王」

- ところで、いまダイ大ファンの一番熱い話題は「獄炎」ですよね！
- こちらについては、別途[ガイドライン](/articles/獄炎の魔王タグづけ)を設けています。

## 謝辞

- 二次創作界隈の文化をよく知らない自分に、特に[こんちえ](https://misskey.delmulin.com/@konchie)さんから色々なことを教わりました。
- この記事自体が、デル丼時代からのメンバーの知識や知恵が少しずつ反映した、集合知と言って良いものです。

皆さん、ありがとうございました。

## 技術的な詳細

https://github.com/pooza/mulukhiya-toot-proxy/wiki/TaggingHandler
